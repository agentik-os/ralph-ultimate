# Ralph Ultimate ğŸ¤–

> Autonomous AI coding loop with **Unlimited Mode** + **Playwright Verification** for Claude Code

**Ralph Ultimate** is a terminal-based autonomous development system that works with Claude Code to execute complex features while you sleep. It runs **without rate limits**, auto-resumes after API limits, and verifies work with Playwright screenshots.

## âœ¨ Features

| Feature | Description |
|---------|-------------|
| **Unlimited Mode** | No rate limiting - runs as long as needed |
| **Auto-Resume** | Automatically resumes after Claude's 5h API limit (waits 65 min) |
| **Circuit Breaker** | Detects infinite loops, prevents token waste |
| **Playwright Verification** | Screenshots + console error checks after each loop |
| **Interactive Setup** | `ralph-setup` for easy project initialization |
| **tmux Dashboard** | `--monitor` option for visual progress tracking |
| **Background Launch** | Can be launched by Claude Code in background |
| **Checkpoints** | Saves state, can resume after crash/reboot |

## ğŸš€ Quick Start

### Prerequisites

- [Claude Code CLI](https://claude.ai/code) installed and authenticated
- Node.js 18+
- Playwright installed (`npx playwright install chromium`)

### Installation

```bash
# Clone the repo
git clone https://github.com/agentik-os/ralph-ultimate.git ~/.ralph

# Make scripts executable
chmod +x ~/.ralph/*.sh ~/.ralph/lib/*.sh

# Add to PATH (add to .bashrc/.zshrc)
export PATH="$HOME/.ralph:$PATH"

# Create symlinks for easy access
sudo ln -sf ~/.ralph/ralph.sh /usr/local/bin/ralph
sudo ln -sf ~/.ralph/ralph-setup.sh /usr/local/bin/ralph-setup
sudo ln -sf ~/.ralph/ralph-monitor.sh /usr/local/bin/ralph-monitor
```

### Initialize a Project

```bash
cd /your/project
ralph-setup
```

This creates:
- `PROMPT.md` - Instructions for Claude
- `@fix_plan.md` - Task list with checkboxes
- `@AGENT.md` - Build/run/test commands
- `logs/` - Execution logs and screenshots

## ğŸ“– Usage

### Basic Commands

```bash
# Start autonomous loop (recommended with monitor)
ralph --monitor

# Start without tmux dashboard
ralph

# Check status
ralph --status

# Show circuit breaker state
ralph --circuit-status

# Reset circuit breaker if stuck
ralph --reset-circuit
```

### Options

```bash
ralph --prompt FILE       # Use alternate prompt file
ralph --timeout 30        # Timeout in minutes (default: 15)
ralph --verbose           # Verbose mode

# Playwright options
ralph --no-playwright         # Disable Playwright verification
ralph --playwright-port 3001  # Specify dev server port
```

## ğŸ”„ How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RALPH UNLIMITED LOOP                      â”‚
â”‚                                                              â”‚
â”‚  1. Read PROMPT.md (your instructions)                      â”‚
â”‚  2. Read @fix_plan.md (task list)                           â”‚
â”‚  3. Launch Claude Code                                       â”‚
â”‚  4. Claude works on a task                                   â”‚
â”‚  5. âœ¨ Playwright Verification (if dev server active)       â”‚
â”‚     - Screenshot of the app                                  â”‚
â”‚     - Check console errors                                   â”‚
â”‚  6. Check if done (exit detection)                          â”‚
â”‚  7. If not done â†’ go back to step 3                         â”‚
â”‚  8. If done â†’ STOP                                           â”‚
â”‚                                                              â”‚
â”‚  ğŸ”„ Infinite loop until completion                          â”‚
â”‚  â° If 5h API limit â†’ wait 65 min â†’ resume                  â”‚
â”‚  ğŸ“¸ Auto screenshots in logs/screenshots/                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Project Structure

```
~/.ralph/
â”œâ”€â”€ ralph.sh              # Main loop script (unlimited mode)
â”œâ”€â”€ ralph-setup.sh        # Interactive project setup
â”œâ”€â”€ ralph-monitor.sh      # tmux dashboard
â”œâ”€â”€ ralph-import.sh       # Import requirements
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ circuit_breaker.sh   # Infinite loop protection
â”‚   â”œâ”€â”€ date_utils.sh        # Date utilities
â”‚   â”œâ”€â”€ response_analyzer.sh # Response analysis
â”‚   â””â”€â”€ playwright_verify.sh # Playwright verification
â””â”€â”€ templates/            # Project templates
```

### Project Files Created by ralph-setup

```
your-project/
â”œâ”€â”€ PROMPT.md          # ğŸ“‹ Instructions for Claude (objective, context)
â”œâ”€â”€ @fix_plan.md       # âœ… Task list with checkboxes
â”œâ”€â”€ @AGENT.md          # ğŸ”§ Build/run/test commands
â”œâ”€â”€ status.json        # ğŸ“Š Current state (generated by Ralph)
â””â”€â”€ logs/
    â”œâ”€â”€ ralph.log      # ğŸ“ Execution logs
    â””â”€â”€ screenshots/   # ğŸ“¸ Playwright screenshots
```

## ğŸ”§ Configuration

### Default Settings (Unlimited Mode)

```bash
# No rate limiting
RATE_LIMIT_ENABLED=false
MAX_CALLS_PER_HOUR=999999999

# Auto-resume on 5h API limit
AUTO_RESUME_ON_5H_LIMIT=true
API_LIMIT_WAIT_MINUTES=65

# Playwright verification enabled
PLAYWRIGHT_ENABLED=true
PLAYWRIGHT_DEV_PORTS="3000 3001 5173 8080 22001 22002 33001"
```

### Customization

Create `.ralph-config` in your project to override defaults:

```bash
CLAUDE_TIMEOUT_MINUTES=20     # Claude timeout per loop
VERBOSE_PROGRESS=true         # Verbose output
PLAYWRIGHT_ENABLED=false      # Disable Playwright
```

## ğŸ›¡ï¸ Safety Features

### Circuit Breaker

Detects when Ralph is stuck in a loop and stops automatically:
- Max consecutive failures detection
- Token usage monitoring
- Time-based limits

```bash
# Check circuit breaker status
ralph --circuit-status

# Reset if stuck
ralph --reset-circuit
```

### Playwright Verification

After each loop, Ralph:
1. Detects running dev server (ports: 3000, 3001, 5173, 8080, 22001, 22002, 33001)
2. Takes a screenshot
3. Checks for JavaScript console errors
4. Logs the result

Screenshots saved as: `logs/screenshots/loop_5_20260112_143025.png`

## ğŸ“Š Monitoring

### With tmux Dashboard

```bash
ralph --monitor
```

Shows:
- Current task
- Loop count
- Verification status
- Recent logs

### Useful tmux Commands

```bash
tmux attach -t ralph       # Join session
Ctrl+B then D              # Detach (leave running)
Ctrl+C                     # Stop Ralph
tmux kill-session -t ralph # Kill session
```

### View Logs

```bash
tail -f logs/ralph.log            # Real-time logs
ls logs/screenshots/               # View screenshots
cat @fix_plan.md                   # Check completed tasks
cat status.json                    # Detailed status
git log --oneline -10              # Recent commits
```

## ğŸ¯ Best Practices

### DO âœ…
- Use for features with 3+ tasks
- Let it run overnight for big features
- Keep tasks atomic (1 task = 1 iteration)
- Include "Build passes" in acceptance criteria
- Have dev server running for Playwright verification

### DON'T âŒ
- Use for critical production bugs (need human diagnosis)
- Use for architecture decisions (need human validation)
- Use for single small tasks (overhead not worth it)
- Use for auth/payment code (needs human review)

## ğŸ”§ Interactive Setup

When you run `ralph-setup`, it asks:

### 1. Project Name
```
Project name:
> my-awesome-project
```

### 2. Project Type
```
What type of project?

  1) ğŸŒ Web Site / SaaS (Next.js)
  2) ğŸ“± Mobile App (Expo)
  3) ğŸ”Œ Chrome Extension
  4) ğŸ–¥ï¸  CLI / Script
  5) ğŸ“¦ Other

Choice [1-5]:
```

### 3. Tech Stack
```
Tech stack?
  Default: Next.js 16, Convex, Clerk, Stripe, shadcn/ui, Tailwind CSS, Vercel

Press Enter for default, or enter custom stack:
```

### Default Stacks by Type

| Type | Default Stack |
|------|---------------|
| **Web/SaaS** | Next.js 16, Convex, Clerk, Stripe, shadcn/ui, Tailwind CSS, Vercel |
| **Mobile** | Expo, React Native, Convex, Clerk |
| **Extension** | TypeScript, Chrome Extension API |
| **CLI** | Node.js or Bash |

## ğŸ¤ Integration with Claude Code

### Claude Can Launch Ralph in Background

When you ask Claude Code for a feature with multiple tasks, it can:

1. Prepare the files (PROMPT.md, @fix_plan.md, @AGENT.md)
2. Launch Ralph in background
3. Give you commands to monitor progress

```
Ralph launched in background!

ğŸ“ Project: /home/user/my-project
ğŸ“‹ Tasks: 5 tasks in @fix_plan.md

To monitor progress:
  tail -f logs/ralph.log

To see screenshots:
  ls logs/screenshots/

To stop:
  pkill -f "ralph"

Ralph will work autonomously and stop when done.
```

## ğŸ› Troubleshooting

### Ralph is stuck in a loop
```bash
ralph --reset-circuit     # Reset circuit breaker
```

### See what's happening
```bash
ralph --status            # Current state
cat status.json           # Full details
ls logs/                  # View iteration logs
ls logs/screenshots/      # View Playwright screenshots
```

### Stop Ralph properly
```bash
# In tmux terminal:
Ctrl+C

# From another terminal:
tmux kill-session -t ralph

# Kill all Ralph processes:
pkill -f "ralph"
```

### Ralph stopped due to API limit
With current config, Ralph waits 65 minutes and resumes automatically.
No action needed.

### Playwright not taking screenshots
1. Check dev server is running
2. Check Playwright is installed: `ls /home/hacker/.x-navigate`
3. Force port: `ralph --playwright-port 3000`

## ğŸ“ License

MIT License - Use it, modify it, share it!

## ğŸ™ Credits

Created by [AgentikOS](https://github.com/agentik-os) for the Claude Code ecosystem.

Based on concepts from:
- [frankbria/ralph-claude-code](https://github.com/frankbria/ralph-claude-code)
- [Claude Code](https://claude.ai/code) by Anthropic
- [Playwright](https://playwright.dev/) for browser automation

---

**â­ Star this repo if Ralph helps you code while you sleep!**
